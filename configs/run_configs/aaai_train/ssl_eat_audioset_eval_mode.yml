---
# Model configuration
model_spec:
  name: eat_hf
  pretrained: true
  # fairseq_weights_path: ../EAT/multirun/2025-07-08/14-54-53/0/eat_animalspeak/checkpoint20.pt
  fairseq_weights_path: /home/david_earthspecies_org/EAT/multirun/2025-07-04/07-50-52/0/eat_audioset/checkpoint30.pt
  # AudioSet uses default normalization parameters (general audio)
  eat_norm_mean: -4.268
  eat_norm_std: 4.569
  audio_config:
    sample_rate: 16000
    representation: raw
    normalize: false
    target_length_seconds: 10
    window_selection: random

dataset_config: configs/data_configs/data_base.yml

# How to use the labels (supervised: use class indices, text: use text labels)
label_type: supervised
debug_mode: false

# audio preprocessing (e.g. event detection)
preprocessing: null

# Target sampleâ€‘rate expected by the model
sr: 16000

# Training parameters (for evaluation fine-tuning)
training_params:
  train_epochs: 100
  lr: 0.0003
  batch_size: 64
  optimizer: adamw
  weight_decay: 0.01
  amp: false
  amp_dtype: bf16

# Required fields for RunConfig schema
output_dir: "./runs/aaai/ssl_eat_audioset"
loss_function: cross_entropy

device: cuda
seed: 42
num_workers: 8

augmentations:
  # Add background noise at random SNRs
  - noise:
      noise_dirs:
        - "/home/milad_earthspecies_org/data-migration/lambda/home/ubuntu/\
          foundation-model-storage/foundation-model-data/audio_16k/noise/demand_10s"
        - "/home/milad_earthspecies_org/data-migration/lambda/home/ubuntu/\
          foundation-model-storage/foundation-model-data/audio_16k/noise/idmt"
        - "/home/milad_earthspecies_org/data-migration/lambda/home/ubuntu/\
          foundation-model-storage/foundation-model-data/audio_16k/noise/tut2016_10s"
        - "/home/milad_earthspecies_org/data-migration/lambda/home/ubuntu/\
          foundation-model-storage/foundation-model-data/audio_16k/noise/urbansound"
        - "/home/milad_earthspecies_org/data-migration/lambda/home/ubuntu/\
          foundation-model-storage/foundation-model-data/audio_16k/noise/freesound_10s"
        - "/home/milad_earthspecies_org/data-migration/lambda/home/ubuntu/\
          foundation-model-storage/foundation-model-data/audio_16k/noise/\
          orcasound_shipnoise_10s"
        - "/home/milad_earthspecies_org/data-migration/lambda/home/ubuntu/\
          foundation-model-storage/foundation-model-data/audio_16k/noise/deepship_10s"
        - "/home/milad_earthspecies_org/data-migration/lambda/home/ubuntu/\
          foundation-model-storage/foundation-model-data/audio_16k/noise/shipsear_10s"
        - "/home/milad_earthspecies_org/data-migration/lambda/home/ubuntu/\
          foundation-model-storage/foundation-model-data/audio_16k/noise/wham_noise"
        - "/home/milad_earthspecies_org/data-migration/lambda/home/ubuntu/\
          foundation-model-storage/foundation-model-data/audio_16k/noise/audioset"
        # - "/home/milad_earthspecies_org/data-migration/lambda/home/ubuntu/\
        #   foundation-model-storage/foundation-model-data/audio_16k/noise/\
        #   ssw-detection"
      snr_db_range: [-5, 20]  # mix noise between -5 dB and 20 dB SNR
      augmentation_prob: 0.5
    # Mixup augmentation for audio samples
  - mixup:
      alpha: 0.4  # Controls the Beta distribution shape
      n_mixup: 1  # Maximum number of mixup pairs per batch (defaults to 1)
      augmentation_prob: 0.5  # Probability of applying mixup to a batch
