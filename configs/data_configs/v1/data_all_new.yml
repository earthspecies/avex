# Comprehensive dataset configuration combining:
# - AudioSet
# - Xeno-Canto
# - iNaturalist
# - AnimalSpeak (filtered to Watkins + Animal Sound Archive only)
# All datasets use 32kHz sample rate for BEATs training

train_datasets:
  # AudioSet dataset
  - dataset_name: audioset
    dataset_version: "0.2.0"
    split: train-environmental
    balance: false
    balance_attribute: label
    custom_balancing: false
    balancing_method: upsample
    subset_percentage: 1.0
    audio_max_length_seconds: 5
    audio_path_col: path
    sample_rate: 32000

  # Xeno-Canto dataset
  - dataset_name: xeno-canto
    dataset_version: 0.1
    split: train
    balance: false
    balance_attribute: canonical_name
    custom_balancing: false
    balancing_method: upsample
    subset_percentage: 1.0
    audio_max_length_seconds: 5
    audio_path_col: path
    sample_rate: 32000
    transformations:
      - type: labels_from_features
        features: [canonical_name]
        output_feature: label
        override: true

  # iNaturalist dataset
  - dataset_name: inaturalist
    dataset_version: 0.1
    split: train
    balance: false
    balance_attribute: canonical_name
    custom_balancing: false
    balancing_method: upsample
    subset_percentage: 1.0
    audio_max_length_seconds: 5
    audio_path_col: path
    sample_rate: 32000
    transformations:
      - type: labels_from_features
        features: [canonical_name]
        output_feature: label
        override: true

val_datasets:
  # AudioSet dataset
  # - dataset_name: audioset
  #   dataset_version: "0.2.0"
  #   split: validation
  #   balance: false
  #   balance_attribute: label
  #   custom_balancing: false
  #   balancing_method: upsample
  #   subset_percentage: 1.0
  #   audio_max_length_seconds: 5
  #   audio_path_col: path
  #   sample_rate: 32000

  # Xeno-Canto dataset
  - dataset_name: xeno-canto
    dataset_version: 0.1
    split: validation
    balance: false
    balance_attribute: canonical_name
    custom_balancing: false
    balancing_method: upsample
    subset_percentage: 1.0
    audio_max_length_seconds: 5
    audio_path_col: path
    sample_rate: 32000
    transformations:
      - type: labels_from_features
        features: [canonical_name]
        output_feature: label
        override: true

  # iNaturalist dataset (20% subset for validation)
  # - dataset_name: inaturalist
  #   dataset_version: 0.1
  #   split: train
  #   balance: false
  #   balance_attribute: canonical_name
  #   custom_balancing: false
  #   balancing_method: upsample
  #   subset_percentage: 0.2
  #   audio_max_length_seconds: 5
  #   audio_path_col: path
  #   sample_rate: 32000
  #   transformations:
  #     - type: labels_from_features
  #       features: [canonical_name]
  #       output_feature: label
  #       override: true

  # AnimalSpeak dataset (filtered to Watkins + Animal Sound Archive)
  # - dataset_name: animalspeak
  #   dataset_version: 0.0
  #   split: validation
  #   balance: false
  #   balance_attribute: canonical_name
  #   custom_balancing: false
  #   balancing_method: upsample
  #   subset_percentage: 1.0
  #   audio_max_length_seconds: 5
  #   audio_path_col: path
  #   sample_rate: 32000
  #   transformations:
  #     - type: filter
  #       mode: include
  #       property: source
  #       values: [Watkins, "Animal Sound Archive"]
  #     - type: labels_from_features
  #       features: [canonical_name]
  #       output_feature: label
  #       override: true

# Concatenation settings
concatenate_train: true
concatenate_val: true
concatenate_method: soft

# Global transformations applied AFTER concatenation
transformations:
  # Unify labels from different datasets into a single 'label' field
  - type: labels_from_features
    features: [label]
    output_feature: label
    override: true
