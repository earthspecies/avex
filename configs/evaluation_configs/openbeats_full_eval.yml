# OpenBEATs Full Evaluation Configuration
# =========================================
# This config runs all evaluations from the paper on OpenBEATs pretrained models:
#   - BEANS Classification: Probe accuracy, R-AUC, NMI
#   - BEANS Detection: Probe (mAP), R-AUC
#   - BirdSet: Probe (mAP), R-AUC
#   - Individual ID: Probe accuracy, R-AUC
#   - Vocal Repertoire: R-AUC, NMI
#
# Uses OpenBEATs Large i2 checkpoint (best performing)
# For other checkpoints, create separate run_config files or use --patch
#
# Usage:
#   uv run repr-learn evaluate --config configs/evaluation_configs/openbeats_full_eval.yml
#   
# For specific benchmarks, use --patch:
#   uv run repr-learn evaluate --config configs/evaluation_configs/openbeats_full_eval.yml \
#       --patch dataset_config=configs/data_configs/beans.yml

# Default dataset configuration (BEANS benchmark)
# Change via --patch to run other benchmarks
dataset_config: configs/data_configs/beans.yml

training_params:
  train_epochs: 900
  lr: 0.001
  batch_size: 32
  optimizer: adamw
  weight_decay: 0.01
  amp: false
  amp_dtype: bf16

# OpenBEATs pretrained model experiment (Large i2 - best performing)
experiments:
  - run_name: openbeats_large_i2
    run_config: configs/run_configs/pretrained/openbeats_eval.yml
    pretrained: true
    probe_config:
      probe_type: linear
      target_layers: ["backbone"]
      aggregation: "mean"
      input_processing: "pooled"
      freeze_backbone: true
      online_training: false

# Where to save the evaluation results
save_dir: evaluation_results/openbeats_full_eval

# Optional: Append results to a global CSV file for cross-model comparison
results_csv_path: evaluation_results/openbeats_all_benchmarks.csv

device: cuda

seed: 42

num_workers: 8

# Evaluation modes matching the paper:
# - probe: Linear probe accuracy (for classification) or mAP (for detection)
# - retrieval: R-AUC (Retrieval Area Under Curve)
# - clustering: NMI (Normalized Mutual Information)
eval_modes:
  - probe
  - retrieval
  - clustering

offline_embeddings:
  overwrite_embeddings: true
